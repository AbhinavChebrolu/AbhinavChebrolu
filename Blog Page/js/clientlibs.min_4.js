$((function(){"use strict";var e=$(this),t=e.find("input[name=q]");function n(e,n){n?t.val().length>=3&&($("header .search").css("height",112+$("header .quick-lists").height()),e.css("display","inline-block")):($("header .search").removeAttr("style"),e.hide())}e.on("keyup","form[data-quick-suggestions] input[name=q]",(function(){var e=$(this).closest("form"),t=e.find("[data-quick-lists]"),s=e.find("[data-quick-suggestions]");!0===e.data("quick-suggestions-enabled")&&$.get(e.data("quick-suggestions"),e.serialize(),(function(e){s.find("dd").remove(),$.each(e.suggestions,(function(e,t){s.append($("<dd>").text(t))})),n(s,e.suggestions.length>0),n(t,t.find("dd").length>0)}))})),e.on("keyup","form[data-quick-search-results] input[name=q]",(function(){var e=$(this).closest("form"),t=e.find("[data-quick-lists]"),s=e.find("[data-quick-results]");!0===e.data("quick-search-results-enabled")&&$.get(e.data("quick-search-results"),e.serialize(),(function(e){s.find("dd").remove(),$.each(e.results,(function(e,t){s.append($("<dd>").append($("<a>").attr("href",t.url).text(t.title)))})),n(s,e.results.length>0),n(t,t.find("dd").length>0)}))})),e.on("click",".quick-lists .quick-suggestions dd",(function(){var e=$(this).closest("form"),t=e.find("input[name=q]"),n=$(this).text();t.val(n),e.submit()})),e.on("click","[data-clear-suggestions]",(function(e){e.preventDefault();var t=$(this).closest("form"),n=t.find("[data-quick-lists]");t.find("input[name=q]").val(""),n.hide().find("dd").remove()})),e.on("click",".cmp-button__icon--search",(function(){$(this).closest("header").find(".search input[name=q]").focus()})),$(".cmp-search-container").on("click","button[type=submit]",(function(e){e.preventDefault(),$(this).parents("form").find("input").each((function(){"q"!=$(this).attr("name")&&$(this).removeAttr("name")})),$(this).parents("form").submit()}))})),$((function(){var e=$(".search").find(".search-sort");e.on("click","input[name=orderby]",(function(){e.find("input[name=orderby]").removeClass("sort-active"),$(this).addClass("sort-active")}))})),$((function(){function e(e,n){let s,a,l,i,r,c,h;if($("#pershingxsearch").length){let e=encodeURIComponent($("#pershingx-filter-select .active").text());"All"==e&&(e="Pershing X"),s=e}else s=e.parents(".cmp-search-container .filter-dropdown").find(".selected-btn")?encodeURIComponent(e.parents(".cmp-search-container").find(".filter-dropdown .selected-btn span").text()):"";inputVal=e.parents(".cmp-search-container").find('input[name="q"]').val(),sortVal=e.parents(".cmp-search-container").find('input[name="orderby"]:checked').val(),a=e.parents(".cmp-search-container").find('input[name="offset"]:checked').val(),l=e.parents(".cmp-search-container").find('input[name="search-component-path"]').val(),i=e.parents(".cmp-search-container").find('input[name="search-norecords-msg"]').val(),r=e.parents(".cmp-search-container").find('input[name="search-callfailure-msg"]').val(),c=l+".results.tidy.json",h=!1,(""!=inputVal||null!=inputVal&&n)&&(c+="?"),""!=inputVal&&(c+="q="+inputVal,h=!0),""!=s&&(1==h&&(c+="&"),c+="filter="+s),null!=a&&n&&(1==h&&(c+="&"),c+="offset="+a),"desc"==sortVal&&n?c+="&orderby=desc":c+="&orderBy=asc";let o=e.parents(".cmp-search-container").find(".search-results-list"),u=e.parents(".cmp-search-container").find(".featured-search-results-list"),d=e.parents(".cmp-search-container").find(".pagination"),p=e.parents(".cmp-search-container").find(".search-start[data-search-start]"),f=e.parents(".cmp-search-container").find(".search-end[data-search-end]"),m=e.parents(".cmp-search-container").find(".search-showing [data-search-total]"),g=e.parents(".cmp-search-container").find(".search-showing"),v=e.parents(".cmp-search-container").find('input[name="showThumbnail-flag"]').val();$.ajax({type:"GET",url:c,dataType:"json",success:function(e){if(null!=e)if(null!=e.results){let n=e.results,s=e.featuredResults,a=e.resultTotal,l="",i="";for(let e=0;e<s.length;e++){let n=t(s[e].dateTime),a=s[e].tagIds,i=s[e].url,r=s[e].path,c=s[e].title,h=s[e].description,o=s[e].contentType,u=s[e].openInNewTab,d="";"true"==v&&null!==s[e].thumbnailUrl&&"true"==s[e].enablePageLevelThumbnail?d+='<li class="plain"><div class="search-results--thumbnail"><img src="'+s[e].thumbnailUrl+'"/></div><div class="info">':("true"==v&&s[e].thumbnailUrl,d+='<li class="plain"><div class="info">'),a.length>0&&(d+='<div class="search-results--header">',d+='<span class="search-results--title filter-tag" aria-hidden="true">',d+=a,null!=n&&(d+=" | "+n),d+="</span></div>"),null!=i&&(d+='<h4><a href="',null!=o&&"PAGE"==o?(d+=i,null!=u&&u?d+='" target="_blank':u||(d+='" target="_self')):"ASSET"==o&&(d+=r+'" target="_blank'),d+='">',null!=c&&(d+=c),d+="</a></h4>"),null!=h&&(d+="<p>"+h+"</p>"),null!=i&&(d+='<a class="cmp-button--info" href="'+i,null!=u&&u?d+='" target="_blank':u||(d+='" target="_self'),d+='">Learn More</a>'),d+='</div><div style="clear: both;"></div></li>',l+=d}if($("#pershingxsearch").length)for(let e=0;e<n.length;e++){let s=t(n[e].dateTime),a=n[e].tagIds,l=n[e].url,r=n[e].path,c=n[e].title,h=(n[e].description,n[e].contentType),o=n[e].openInNewTab,u="",d=e%2==0?" odd":" even";null!==n[e].thumbnailUrl&&""!=n[e].thumbnailUrl?u+='<li class="plain '+d+'"><div class="search-results--thumbnail"><img src="'+n[e].thumbnailUrl+'"/></div><div class="info">':("true"==v&&n[e].thumbnailUrl,u+='<li class="plain '+d+'"><div class="info">'),a.length>0&&(u+='<div class="search-results--header"><span class="search-results--title filter-tag" aria-hidden="true">'+a,null!=s&&(u+=" | "+s),u+="</span></div>"),null!=l&&(u+='<h4><a href="',null!=h&&"PAGE"==h?(u+=l,null!=o&&o?u+='" target="_blank':o||(u+='" target="_self')):"ASSET"==h&&(u+=r+'" target="_blank'),u+='">',null!=c&&(u+=c),u+="</a></h4>"),null!=l&&(u+='<div class="learn-more"><a href="',null!=h&&"PAGE"==h&&(u+=l,null!=o&&o?u+='" target="_blank':o||(u+='" target="_self')),u+='">',u+="Learn more",u+="</a></div>"),u+='</div><div style="clear: both;"></div></li>',i+=u}else for(let e=0;e<n.length;e++){let s=t(n[e].dateTime),a=n[e].tagIds,l=n[e].url,r=n[e].path,c=n[e].title,h=n[e].description,o=n[e].contentType,u=n[e].openInNewTab,d="";"true"==v&&null!==n[e].thumbnailUrl&&1==n[e].enablePageLevelThumbnail?d+='<li class="plain"><div class="search-results--thumbnail"><img src="'+n[e].thumbnailUrl+'"/></div><div class="info">':("true"==v&&n[e].thumbnailUrl,d+='<li class="plain"><div class="info">'),a.length>0&&(d+='<div class="search-results--header"><span class="search-results--title filter-tag" aria-hidden="true">'+a,null!=s&&(d+=" | "+s),d+="</span></div>"),null!=l&&(d+='<h4><a href="',null!=o&&"PAGE"==o?(d+=l,null!=u&&u?d+='" target="_blank':u||(d+='" target="_self')):"ASSET"==o&&(d+=r+'" target="_blank'),d+='">',null!=c&&(d+=c),d+="</a></h4>"),null!=h&&(d+="<p>"+h+"</p>"),d+='</div><div style="clear: both;"></div></li>',i+=d}u.html(l),o.html(i);let r=e.pagination,c="<li>",h="",g="";if(r.length>1){for(let e=0;e<r.length;e++)c+=' <input id="search-pagination--'+r[e].label+'"type="radio" name="offset" value="'+r[e].offset+'"',1==r[e].active&&(c+="checked ",h=r[e].offset+1,g=parseInt(a)<=h+9?a:h+9),1==r[e].disabled&&(c+="disabled "),c+='/> <label for="search-pagination--'+r[e].label+'" class="search-pagination--'+r[e].label+'">'+r[e].label+"</label> ";c+="</li>",d.html(c),p.each((function(){$(this).text(h)})),f.each((function(){$(this).text(g)})),m.each((function(){$(this).text(a)}))}else d.html(""),n.length>0?(p.each((function(){$(this).text("1")})),f.each((function(){$(this).text(a)})),m.each((function(){$(this).text(a)}))):(p.each((function(){$(this).text("0")})),f.each((function(){$(this).text(a)})),m.each((function(){$(this).text("0")})))}else o.html("<h3>"+i+"</h3>"),u.html("<h3>"+i+"</h3>"),d.html(""),g.html("");else o.html("<h3>"+i+"</h3>"),u.html("<h3>"+i+"</h3>"),d.html(""),g.html("")},error:function(){o.html("<h3>"+r+"</h3>"),u.html("<h3>"+r+"</h3>"),d.html(""),g.html("")}})}function t(e){let t=new Date(e),n=""+t.getMonth(),s=""+t.getDate(),a=t.getFullYear();s.length<2&&(s="0"+s);let l=function(e){let t=new Array;return t[0]="JANUARY",t[1]="FEBRUARY",t[2]="MARCH",t[3]="APRIL",t[4]="MAY",t[5]="JUNE",t[6]="JULY",t[7]="AUGUST",t[8]="SEPTEMBER",t[9]="OCTOBER",t[10]="NOVEMBER",t[11]="DECEMBER",t[e]}(n);return l+", "+a}$(".cmp-search-container").on("change",".search-pagination input[type=radio]",(function(){e($(this),!0)})),$(".cmp-search-container").on("change",".search-sort input[type=radio]",(function(){e($(this),!0)})),$(".cmp-search-container").on("click",".default-list-option",(function(){$(this).parents(".select-wrapper").toggleClass("select-active")})),$(".cmp-search-container").on("click",".filter-select li",(function(){let t=$(this).html();if($(this).hasClass("default-list-opt"))this.parents(".select-wrapper").find(".default-list-option li").html(t);else{let e=$(this).siblings(".default-list-opt").html();$(this).parents(".select-wrapper").find(".default-list-option li").html(e),$(this).parents(".select-wrapper").find(".default-list-opt").css("display","none");let n=$(this).parents(".select-wrapper").find(".default-list-option");$("<button class='selected-btn'>"+t+"</button>").insertAfter(n),$(".selected-btn").click((function(){$(this).siblings(".default-list-opt").css("display","block"),$(this).parents(".select-wrapper").toggleClass("select-active"),$(this).parents(".select-wrapper").siblings().removeClass("select-active"),$(this).remove()}))}$(this).parents(".select-wrapper").toggleClass("select-active"),e($(this),!1)})),$(document).on("click",".selected-btn",(function(t){$(".select-wrapper").hasClass("select-active")&&e($(".filter--one .default-list-option"),!1),$(".select-wrapper").removeClass("select-active")})),$(document).on("keyup",(function(e){"Escape"==e.key&&$(".search-filters .select-wrapper").removeClass("select-active")})),$(".search-filters").on("keydown",".filter--one",(function(e){("13"==e.keyCode||"32"==e.keyCode)&&(e.preventDefault(),$(this).find("button").hasClass("selected-btn")?$(this).find(".selected-btn").click():$(this).find(".default-list-option").click())})),$("#pershingx-filter-select span").on("click",(function(){$("#pershingx-filter-select span").removeClass("active"),$(this).addClass("active");const e=$(this).text().toLowerCase();"all"==e?$(".tags").show():($(".tags").hide(),$("."+e).show())}))}));