$((function(){function e(e,l){let s,n,i,a,r,o,d,c,p,f,h;s=e.parents(".list").find(".filter-one-dropdown").find(".selected-btn")?encodeURIComponent(e.parents(".list").find(".filter-one-dropdown").find(".selected-btn span").text()):"",n=e.parents(".list").find(".filter-two-dropdown").find(".selected-btn")?encodeURIComponent(e.parents(".list").find(".filter-two-dropdown").find(".selected-btn span").text()):"",i=e.parents(".list").find(".filter-three-dropdown").find(".selected-btn")?encodeURIComponent(e.parents(".list").find(".filter-three-dropdown").find(".selected-btn span").text()):"",a=e.parents(".list").find('.pagination input[name="offset"]:checked').val(),r=e.parents(".list").find('input[name="component-path"]').val(),o=e.parents(".list").find('input[name="norecords-msg"]').val(),d=e.parents(".list").find('input[name="callfailure-msg"]').val(),c=e.parents(".list").find('input[name="showPagination-flag"]').val(),p=e.parents(".list").find('input[name="showThumbnail-flag"]').val(),f=r+".model.json",h=!1,("default"!=s||"default"!=n||"default"!=i||null!=a&&l)&&(f+="?"),"default"!=s&&(f+="filter1="+s,h=!0),"default"!=n&&(1==h&&(f+="&"),f+="filter2="+n,h=!0),"default"!=i&&(1==h&&(f+="&"),f+="filter3="+i,h=!0),null!=a&&l&&(1==h&&(f+="&"),f+="offset="+a);let u=e.parents(".list").find(".cmp-list-container .cmp-list"),m=e.parents(".list").find(".search-pagination .pagination");$.ajax({type:"GET",url:f,dataType:"json",success:function(e){if(null!=e)if(null!=e.items){let l=e.items,s="";for(let e=0;e<l.length;e++){t(l[e].date);"true"==p&&null!==l[e].thumbnailUrl&&1==l[e].enablePageLevelThumbnail?s+='<div class="cmp-list-item"><div class="cmp--list-thumbnail"><img src="'+l[e].thumbnailUrl+'"/></div><article><div class="cmp--list-date">':("true"==p&&l[e].thumbnailUrl,s+='<div class="cmp-list-item"><article><div class="cmp--list-date">'),null!=l[e].date&&(s+=l[e].date),s+="</div><div>",null!=l[e].url?s+='<a class="cmp-list-item-link" href="'+l[e].url+'">':s+='<span class="cmp-list-item-link">',null!=l[e].title&&(s+=l[e].title),null!=l[e].url?s+="</a>":s+="</span>",s+='</div><div class="cmp-list-item-description">',null!=l[e].description&&(s+=l[e].description),s+="</div></article></div>"}if(u.html(s),"true"==c){let t=e.pagination;if(t.length>1){let e="<li>";for(let l=0;l<t.length;l++)e+=' <input id="search-pagination--'+t[l].label+'"type="radio" name="offset" value="'+t[l].offset+'"',1==t[l].active&&(e+="checked "),1==t[l].disabled&&(e+="disabled "),e+='/> <label for="search-pagination--'+t[l].label+'" class="search-pagination--'+t[l].label+'">'+t[l].label+"</label> ";e+="</li>",m.html(e)}else m.html("")}}else u.html("<h3>"+o+"</h3>"),m.html("");else u.html("<h3>"+o+"</h3>"),m.html("")},error:function(){u.html("<h3>"+d+"</h3>"),m.html("")}})}function t(e){let t=new Date(e),l=""+t.getMonth(),s=""+t.getDate(),n=t.getFullYear();s.length<2&&(s="0"+s);let i=function(e){let t=new Array;t[0]="JANUARY",t[1]="FEBRUARY",t[2]="MARCH",t[3]="APRIL",t[4]="MAY",t[5]="JUNE",t[6]="JULY",t[7]="AUGUST",t[8]="SEPTEMBER",t[9]="OCTOBER",t[10]="NOVEMBER",t[11]="DECEMBER";let l=t[e];return l}(l);return i+" "+s+", "+n}$(".list .cmp-list-container").each((function(){e($(this),!0)})),$(".list").on("change",".search-pagination input[type=radio]",(function(){e($(this),!0)})),$(".default_option").click((function(){$(this).parents(".select_wrap").toggleClass("select-active")})),$(".select_ul li").click((function(){let t=$(this).html();if($(this).hasClass("default-opt"))$(this).parents(".select_wrap").find(".default_option li").html(t);else{let e=$(this).siblings(".default-opt").html();$(this).parents(".select_wrap").find(".default_option li").html(e),$(this).parents(".select_wrap").find(".default_option").css("display","none");let l=$(this).parents(".select_wrap").find(".default_option");$("<button class='selected-btn'>"+t+"</button>").insertAfter(l),$(".selected-btn").click((function(){$(this).siblings(".default_option").css("display","block"),$(this).parents(".select_wrap").toggleClass("select-active"),$(this).parents(".select_wrap").siblings().removeClass("select-active"),$(this).remove()}))}$(this).parents(".select_wrap").toggleClass("select-active"),e($(this),!1)})),$("body").click((function(t){$(t.target).parents().hasClass("filter-one-dropdown")&&($(".filter-two-dropdown").parents(".select_wrap").removeClass("select-active"),$(".filter-three-dropdown").parents(".select_wrap").removeClass("select-active")),$(t.target).parents().hasClass("filter-two-dropdown")&&($(".filter-one-dropdown").parents(".select_wrap").removeClass("select-active"),$(".filter-three-dropdown").parents(".select_wrap").removeClass("select-active")),$(t.target).parents().hasClass("filter-three-dropdown")&&($(".filter-one-dropdown").parents(".select_wrap").removeClass("select-active"),$(".filter-two-dropdown").parents(".select_wrap").removeClass("select-active")),$(t.target).parents().hasClass("filter-one-dropdown")||$(t.target).parents().hasClass("filter-two-dropdown")||$(t.target).parents().hasClass("filter-three-dropdown")||$(t.target).parents().hasClass("selected-btn")||$(t.target).hasClass("selected-btn")||($(".select_wrap").hasClass("select-active")&&e($(".filter-one-dropdown .default_option"),!1),$(".select_wrap").removeClass("select-active"))})),$(document).on("keyup",(function(e){"Escape"==e.key&&$(".select_wrap").removeClass("select-active")})),$(".filter-one-dropdown, .filter-two-dropdown, .filter-three-dropdown").on("keydown",(function(e){("13"==e.keyCode||"32"==e.keyCode)&&(e.preventDefault(),$(this).find("button").hasClass("selected-btn")?$(this).find(".selected-btn").click():$(this).find(".default_option").click())}))}));